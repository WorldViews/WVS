{% from "security/_macros.html" import render_field_with_errors_, 
        render_field_in_table, render_field, render_field_ %}

{% macro social_login(provider_id, display_name) %}
  <form action="{{ url_for('social.login', provider_id=provider_id) }}" method="POST">
    <input type="submit" value="Login with {{ display_name }}" />
  </form>
{% endmacro %}


<!-- { % include "security/_messages.html" % } -->

<h2>Login</h2>
<ul>
<form action="{{ url_for_security('login') }}" method="POST" name="login_user_form">
  {{ login_user_form.hidden_tag() }}
  <table>
  {{ render_field_in_table(login_user_form.email) }}
  {{ render_field_in_table(login_user_form.password) }}
  </table>
<p>
  {{ render_field_with_errors_(login_user_form.remember) }}
  {{ render_field_(login_user_form.next) }} 
  &nbsp;&nbsp;
  {{ render_field_(login_user_form.submit) }}
</p>
</form>

  {{ social_login('twitter', 'Twitter' )}}
  {{ social_login('facebook', 'Facebook' )}}

  {% if security.recoverable %}
  <a href="{{ url_for_security('forgot_password') }}">Forgot password</a><br/></li>
  {% endif %}

  {% if security.confirmable %}
  <a href="{{ url_for_security('send_confirmation') }}">Confirm account</a></li>
  {% endif %}

<!-- { % include "security/_menu.html" % } -->
</ul>

<h2>No Account?</h2>
<ul>
  {% if security.registerable %}
  <a href="{{ url_for_security('register') }}{% if 'next' in request.args %}?next={{ request.args.next|urlencode }}{% endif %}">Sign Up!</a><br/></li>
  {% endif %}

</ul>

